{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω{% endblock title %}</title>
    <link rel="stylesheet" href="{% static 'css/theme.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
</head>
<body>

    <header class="header">
        <div class="nav-container">
            <a href="{% url 'main:product_list' %}" class="logo">üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω</a>
            <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>
            
            <!-- Desktop navigation -->
            <nav class="nav-buttons desktop-nav">
                <a href="{% url 'main:product_list' %}" class="nav-btn">–¢–æ–≤–∞—Ä—ã</a>
                <a href="{% url 'main:service_list' %}" class="nav-btn">–£—Å–ª—É–≥–∏</a>
                <a href="{% url 'review:review_list' %}" class="nav-btn">–û—Ç–∑—ã–≤—ã</a>
           
                {%if request.user.email is not none%}
                <a href="{% url 'user:profile' %}" class="nav-btn">–ü—Ä–æ—Ñ–∏–ª—å</a>
                <a href="{% url 'cart:cart_detail' %}" class="nav-btn">–ö–æ—Ä–∑–∏–Ω–∞</a>
                {%else%}
                <a href="{% url 'user:login' %}" class="nav-btn">–í–æ–π—Ç–∏</a>
                <a href="{% url 'user:register' %}" class="nav-btn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {%endif%}
                <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
            </nav>
            
            <!-- Sidebar navigation -->
            <nav class="nav-buttons sidebar-menu" id="sidebarMenu">
                <div class="sidebar-header">
                    <h3>–ú–µ–Ω—é</h3>
                    <button class="close-sidebar" onclick="toggleMenu()">‚úï</button>
                </div>
                <div class="sidebar-content">
                    <a href="{% url 'main:product_list' %}" class="nav-btn">üõçÔ∏è –¢–æ–≤–∞—Ä—ã</a>
                    <a href="{% url 'main:service_list' %}" class="nav-btn">üèÉ‚Äç‚ôÇÔ∏è –£—Å–ª—É–≥–∏</a>
                    <a href="{% url 'review:review_list' %}" class="nav-btn">üí¨ –û—Ç–∑—ã–≤—ã</a>
               
                    {%if request.user.email is not none%}
                    <a href="{% url 'user:profile' %}" class="nav-btn">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
                    <a href="{% url 'cart:cart_detail' %}" class="nav-btn">üõí –ö–æ—Ä–∑–∏–Ω–∞</a>
                    {%else%}
                    <a href="{% url 'user:login' %}" class="nav-btn">üîë –í–æ–π—Ç–∏</a>
                    <a href="{% url 'user:register' %}" class="nav-btn">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                    {%endif%}
                    <button class="theme-toggle sidebar-theme-toggle" onclick="toggleTheme()">üåô –°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Sidebar overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleMenu()"></div>

    <main class="main-content">


        {% block content %}
        {% endblock content %}
    </main>

    
    <footer class="footer">
        <div class="footer-content">
            <h3 class="footer-title">üõçÔ∏è –ù–∞—à –º–∞–≥–∞–∑–∏–Ω</h3>
            <p class="footer-text">
                –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –¥–ª—è –≤–∞—Å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, –ø—Ä–µ–¥–ª–∞–≥–∞—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –∏ –æ—Ç–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å.
            </p>
            <p class="footer-text">
                ¬© 2025 –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
            </p>
        </div>
    </footer>

    <script>
        // Theme toggle functionality
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update button icon
            const button = document.querySelector('.theme-toggle');
            if (button) {
                button.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            }
        }

        // Sidebar menu toggle functionality
        function toggleMenu() {
            const sidebarMenu = document.getElementById('sidebarMenu');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const toggleButton = document.querySelector('.menu-toggle');
            
            if (sidebarMenu && toggleButton) {
                sidebarMenu.classList.toggle('active');
                sidebarOverlay.classList.toggle('active');
                toggleButton.classList.toggle('active');
                toggleButton.textContent = sidebarMenu.classList.contains('active') ? '‚úï' : '‚ò∞';
            }
        }

        // Close sidebar when clicking outside
        document.addEventListener('click', function(event) {
            const sidebarMenu = document.getElementById('sidebarMenu');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const toggleButton = document.querySelector('.menu-toggle');
            
            if (sidebarMenu && toggleButton && 
                !sidebarMenu.contains(event.target) && 
                !toggleButton.contains(event.target)) {
                sidebarMenu.classList.remove('active');
                sidebarOverlay.classList.remove('active');
                toggleButton.classList.remove('active');
                toggleButton.textContent = '‚ò∞';
            }
        });

        // Load saved theme on page load
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.setAttribute('data-theme', savedTheme);
            
            const button = document.querySelector('.theme-toggle');
            if (button) {
                button.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            }
        });
    </script>

</body>
</html>