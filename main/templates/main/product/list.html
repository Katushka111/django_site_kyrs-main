{% extends "main/base.html" %}
{% block title %}
    {% if category %}{{ category.name }} - –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω{% else %}–í—Å–µ —Ç–æ–≤–∞—Ä—ã - –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω{% endif %}
{% endblock title %}

{% block content %}
    {% if category %}
        <div class="category-header">
            <h1>{{ category.name }}</h1>
            <p>–¢–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "{{ category.name }}"</p>
        </div>
    {% endif %}
    
    <div class="products-section">
        <h2 class="section-title">
            {% if category %}{{ category.name }}{% else %}–í—Å–µ —Ç–æ–≤–∞—Ä—ã{% endif %}
        </h2>
        {% if products %}
            <div class="products-grid">
                {% for product in products %}
                    <div class="product-card">
                        {% if product.image %}
                            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">
                        {% else %}
                            <div class="product-image" style="display: flex; align-items: center; justify-content: center; background: linear-gradient(45deg, #667eea, #764ba2); color: white; font-size: 3rem;">
                                üì¶
                            </div>
                        {% endif %}
                        <div class="product-info">
                            <h3 class="product-name">{{ product.name }}</h3>
                            <div class="product-price">{{ product.price }} BYN</div>
                            <p class="product-description">{{ product.description|truncatewords:20 }}</p>
                            <div class="product-actions">
                                <a href="{{ product.get_absolute_url }}" class="product-link">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                                {% if user.is_authenticated %}
                                    <form method="post" action="{% url 'cart:cart_add' product.id %}" class="cart-form">
                                        {% csrf_token %}
                                        <input type="hidden" name="quantity" value="1">
                                        <button type="submit" class="add-to-cart-btn">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                                    </form>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-products">
                <p>–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ç–æ–≤–∞—Ä—ã –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –º–∞–≥–∞–∑–∏–Ω.</p>
            </div>
        {% endif %}
    </div>
{% endblock content %}